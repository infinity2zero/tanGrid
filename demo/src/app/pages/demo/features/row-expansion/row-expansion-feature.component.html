<div class="feature-page">
	<div class="feature-header">
		<h1 class="feature-title">Row Expansion</h1>
		<p class="feature-description">
			Expandable rows to show additional details, nested tables, or custom content. Perfect for master-detail views, order line items, or any nested data structures.
		</p>
		<button
			type="button"
			class="feature-toggle-code"
			(click)="showCode.set(!showCode())"
			[attr.aria-expanded]="showCode()"
		>
			@if (showCode()) {
				<span>Hide Code</span>
				<span class="mdi mdi-chevron-up"></span>
			} @else {
				<span>Show Code</span>
				<span class="mdi mdi-chevron-down"></span>
			}
		</button>
	</div>

	<div class="feature-example">
		<h2 class="feature-example__title">Real-World Example: Order Management</h2>
		<p class="feature-example__description">
			A master-detail table showing orders with expandable rows to display order items. Click the expand button (<span class="mdi mdi-chevron-right"></span>) in the first column to see order details.
		</p>
		<div class="feature-example__preview">
			<tan-grid
				[data]="orders"
				[columns]="columns"
				[expandable]="true"
				[expandedRowTemplate]="expandedTemplate"
				[striped]="true"
				[bordered]="true"
				[hoverable]="true"
				(expansionChange)="onExpansionChange($event)"
				[theme]="tableTheme()"
			></tan-grid>

			<ng-template #expandedTemplate let-order="row">
				<div class="expanded-content">
					<h3>Order Items</h3>
					<table class="items-table">
						<thead>
							<tr>
								<th>Product</th>
								<th>Quantity</th>
								<th>Price</th>
								<th>Subtotal</th>
							</tr>
						</thead>
						<tbody>
							@for (item of order.items; track item.id) {
								<tr>
									<td>{{ item.productName }}</td>
									<td>{{ item.quantity }}</td>
									<td>${{ item.price.toFixed(2) }}</td>
									<td>${{ item.subtotal.toFixed(2) }}</td>
								</tr>
							}
						</tbody>
						<tfoot>
							<tr>
								<td colspan="3" class="total-label">Total:</td>
								<td class="total-value">${{ order.total.toFixed(2) }}</td>
							</tr>
						</tfoot>
					</table>
				</div>
			</ng-template>
		</div>
		@if (showCode()) {
			<ngsd-code-viewer [code]="code"></ngsd-code-viewer>
		}
	</div>
</div>

