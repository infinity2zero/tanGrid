import{Bb as g,Cb as ne,Jb as E,La as u,W,Ya as O,a as I,aa as v,b as q,bb as y,cb as J,db as X,fa as w,fb as F,hb as C,mb as d,na as Q,nb as m,oa as N,ob as h,pa as z,sb as Z,ub as _,uc as T,vb as b,xb as Y,yb as ee,zb as te}from"./chunk-5NTUSMKZ.js";var ue="https://stackblitz.com",ie=["angular-cli","create-react-app","html","javascript","node","polymer","typescript","vue"],he=["project","search","ports","settings"],ge=["light","dark"],fe=["editor","preview"],oe={clickToLoad:e=>f("ctl",e),devToolsHeight:e=>re("devtoolsheight",e),forceEmbedLayout:e=>f("embed",e),hideDevTools:e=>f("hidedevtools",e),hideExplorer:e=>f("hideExplorer",e),hideNavigation:e=>f("hideNavigation",e),openFile:e=>S("file",e),showSidebar:e=>be("showSidebar",e),sidebarView:e=>D("sidebarView",e,he),startScript:e=>S("startScript",e),terminalHeight:e=>re("terminalHeight",e),theme:e=>D("theme",e,ge),view:e=>D("view",e,fe),zenMode:e=>f("zenMode",e),organization:e=>`${S("orgName",e?.name)}&${S("orgProvider",e?.provider)}`,crossOriginIsolated:e=>f("corp",e)};function se(e={}){let i=Object.entries(e).map(([t,n])=>n!=null&&oe.hasOwnProperty(t)?oe[t](n):"").filter(Boolean);return i.length?`?${i.join("&")}`:""}function f(e,i){return i===!0?`${e}=1`:""}function be(e,i){return typeof i=="boolean"?`${e}=${i?"1":"0"}`:""}function re(e,i){if(typeof i=="number"&&!Number.isNaN(i)){let t=Math.min(100,Math.max(0,i));return`${e}=${encodeURIComponent(Math.round(t))}`}return""}function D(e,i="",t=[]){return t.includes(i)?`${e}=${encodeURIComponent(i)}`:""}function S(e,i){return(Array.isArray(i)?i:[i]).filter(n=>typeof n=="string"&&n.trim()!=="").map(n=>`${e}=${encodeURIComponent(n)}`).join("&")}function ae(){return Math.random().toString(36).slice(2,6)+Math.random().toString(36).slice(2,6)}function U(e,i){return`${ce(i)}${e}${se(i)}`}function B(e,i){let t={forceEmbedLayout:!0};return i&&typeof i=="object"&&Object.assign(t,i),`${ce(t)}${e}${se(t)}`}function ce(e={}){return(typeof e.origin=="string"?e.origin:ue).replace(/\/$/,"")}function H(e,i,t){if(!i||!e||!e.parentNode)throw new Error("Invalid Element");e.id&&(i.id=e.id),e.className&&(i.className=e.className),_e(i,t),ve(e,i,t),e.replaceWith(i)}function R(e){if(typeof e=="string"){let i=document.getElementById(e);if(!i)throw new Error(`Could not find element with id '${e}'`);return i}else if(e instanceof HTMLElement)return e;throw new Error(`Invalid element: ${e}`)}function G(e){return e&&e.newWindow===!1?"_self":"_blank"}function _e(e,i={}){let t=Object.hasOwnProperty.call(i,"height")?`${i.height}`:"300",n=Object.hasOwnProperty.call(i,"width")?`${i.width}`:void 0;e.setAttribute("height",t),n?e.setAttribute("width",n):e.setAttribute("style","width:100%;")}function ve(e,i,t={}){let n=e.allow?.split(";")?.map(o=>o.trim())??[];t.crossOriginIsolated&&!n.includes("cross-origin-isolated")&&n.push("cross-origin-isolated"),n.length>0&&(i.allow=n.join("; "))}var A=class{constructor(i){this.pending={},this.port=i,this.port.onmessage=this.messageListener.bind(this)}request({type:i,payload:t}){return new Promise((n,o)=>{let r=ae();this.pending[r]={resolve:n,reject:o},this.port.postMessage({type:i,payload:q(I({},t),{__reqid:r})})})}messageListener(i){if(typeof i.data.payload?.__reqid!="string")return;let{type:t,payload:n}=i.data,{__reqid:o,__success:r,__error:s}=n;this.pending[o]&&(r?this.pending[o].resolve(this.cleanResult(n)):this.pending[o].reject(s?`${t}: ${s}`:t),delete this.pending[o])}cleanResult(i){let t=I({},i);return delete t.__reqid,delete t.__success,delete t.__error,Object.keys(t).length?t:null}},L=class{constructor(i,t){this.editor={openFile:n=>this._rdc.request({type:"SDK_OPEN_FILE",payload:{path:n}}),setCurrentFile:n=>this._rdc.request({type:"SDK_SET_CURRENT_FILE",payload:{path:n}}),setTheme:n=>this._rdc.request({type:"SDK_SET_UI_THEME",payload:{theme:n}}),setView:n=>this._rdc.request({type:"SDK_SET_UI_VIEW",payload:{view:n}}),showSidebar:(n=!0)=>this._rdc.request({type:"SDK_TOGGLE_SIDEBAR",payload:{visible:n}})},this.preview={origin:"",getUrl:()=>this._rdc.request({type:"SDK_GET_PREVIEW_URL",payload:{}}).then(n=>n?.url??null),setUrl:(n="/")=>{if(typeof n!="string"||!n.startsWith("/"))throw new Error(`Invalid argument: expected a path starting with '/', got '${n}'`);return this._rdc.request({type:"SDK_SET_PREVIEW_URL",payload:{path:n}})}},this._rdc=new A(i),Object.defineProperty(this.preview,"origin",{value:typeof t.previewOrigin=="string"?t.previewOrigin:null,writable:!1})}applyFsDiff(i){let t=n=>n!==null&&typeof n=="object";if(!t(i)||!t(i.create))throw new Error("Invalid diff object: expected diff.create to be an object.");if(!Array.isArray(i.destroy))throw new Error("Invalid diff object: expected diff.destroy to be an array.");return this._rdc.request({type:"SDK_APPLY_FS_DIFF",payload:i})}getDependencies(){return this._rdc.request({type:"SDK_GET_DEPS_SNAPSHOT",payload:{}})}getFsSnapshot(){return this._rdc.request({type:"SDK_GET_FS_SNAPSHOT",payload:{}})}},x=[],V=class{constructor(i){this.id=ae(),this.element=i,this.pending=new Promise((t,n)=>{let o=({data:a,ports:c})=>{a?.action==="SDK_INIT_SUCCESS"&&a.id===this.id&&(this.vm=new L(c[0],a.payload),t(this.vm),s())},r=()=>{this.element.contentWindow?.postMessage({action:"SDK_INIT",id:this.id},"*")};function s(){window.clearInterval(p),window.removeEventListener("message",o)}window.addEventListener("message",o),r();let l=0,p=window.setInterval(()=>{if(this.vm){s();return}if(l>=20){s(),n("Timeout: Unable to establish a connection with the StackBlitz VM"),x.forEach((a,c)=>{a.id===this.id&&x.splice(c,1)});return}l++,r()},500)}),x.push(this)}},we=e=>{let i=e instanceof Element?"element":"id";return x.find(t=>t[i]===e)??null};function ye(e,i){let t=document.createElement("input");return t.type="hidden",t.name=e,t.value=i,t}function Ce(e){return e.replace(/\[/g,"%5B").replace(/\]/g,"%5D")}function le({template:e,title:i,description:t,dependencies:n,files:o,settings:r}){if(!ie.includes(e)){let a=ie.map(c=>`'${c}'`).join(", ");console.warn(`Unsupported project.template: must be one of ${a}`)}let s=[],l=(a,c,k="")=>{s.push(ye(a,typeof c=="string"?c:k))};l("project[title]",i),typeof t=="string"&&t.length>0&&l("project[description]",t),l("project[template]",e,"javascript"),n&&(e==="node"?console.warn("Invalid project.dependencies: dependencies must be provided as a 'package.json' file when using the 'node' template."):l("project[dependencies]",JSON.stringify(n))),r&&l("project[settings]",JSON.stringify(r)),Object.entries(o).forEach(([a,c])=>{l(`project[files][${Ce(a)}]`,c)});let p=document.createElement("form");return p.method="POST",p.setAttribute("style","display:none!important;"),p.append(...s),p}function Ee(e,i){let t=le(e);return t.action=B("/run",i),t.id="sb_run",`<!doctype html>
<html>
<head><title></title></head>
<body>
  ${t.outerHTML}
  <script>document.getElementById('${t.id}').submit();<\/script>
</body>
</html>`}function Te(e,i){let t=le(e);t.action=U("/run",i),t.target=G(i),document.body.appendChild(t),t.submit(),document.body.removeChild(t)}function P(e){return e?.contentWindow?(we(e)??new V(e)).pending:Promise.reject("Provided element is not an iframe.")}function Se(e,i){Te(e,i)}function xe(e,i){let t=U(`/edit/${e}`,i),n=G(i);window.open(t,n)}function Pe(e,i){let t=U(`/github/${e}`,i),n=G(i);window.open(t,n)}function je(e,i,t){let n=R(e),o=Ee(i,t),r=document.createElement("iframe");return H(n,r,t),r.contentDocument?.write(o),P(r)}function $e(e,i,t){let n=R(e),o=document.createElement("iframe");return o.src=B(`/edit/${i}`,t),H(n,o,t),P(o)}function ke(e,i,t){let n=R(e),o=document.createElement("iframe");return o.src=B(`/github/${i}`,t),H(n,o,t),P(o)}var j={connect:P,embedGithubProject:ke,embedProject:je,embedProjectId:$e,openGithubProject:Pe,openProject:Se,openProjectId:xe};var $=(()=>{class e{getProjectConfig(t,n,o="TanGrid Demo",r="TanGrid library demo",s){if(!t||!n||!n.ts)throw new Error("Invalid component name or files provided");let p=n.ts.match(/export class (\w+)/)?.[1]||t,a=this.toKebabCase(p),c=s||(a.startsWith("app-")?a:`app-${a}`);c.startsWith("app-")||(c=`app-${c}`);let k=n.ts,pe=o.replace(/`/g,"\\`").replace(/\${/g,"\\${"),K=c.replace(/`/g,"\\`").replace(/\${/g,"\\${"),M={"index.html":`<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>TanGrid Demo</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
  <app-root></app-root>
</body>
</html>`,"src/main.ts":`import 'zone.js';
import { bootstrapApplication } from '@angular/platform-browser';
import { Component } from '@angular/core';
import { ${p} } from './app/${a}.component';

@Component({
  selector: 'app-root',
  standalone: true,
  imports: [${p}],
  template: '<div style="padding: 20px;"><h1>${pe}</h1><${K}></${K}></div>'
})
export class App {}

bootstrapApplication(App);`,[`src/app/${a}.component.ts`]:k};return n.html&&n.html.trim()&&!n.html.startsWith("<!--")&&(M[`src/app/${a}.component.html`]=n.html),M["src/styles.css"]=`/* Global Styles */
html, body { height: 100%; margin: 0; }
body { font-family: Roboto, "Helvetica Neue", sans-serif; }`,{title:o,description:r,template:"angular-cli",files:M,dependencies:{"@angular/core":"^18.0.0","@angular/common":"^18.0.0","@angular/platform-browser":"^18.0.0","@angular/compiler":"^18.0.0","@angular/forms":"^18.0.0","@angular/router":"^18.0.0","@angular/cdk":"^18.0.0",rxjs:"^7.8.0",tslib:"^2.3.0","zone.js":"~0.14.0",tangrid:"latest","@tanstack/angular-table":"^8.0.0"}}}openProject(t,n,o="TanGrid Demo",r="TanGrid library demo",s){let l=this.getProjectConfig(t,n,o,r,s);j.openProject(l,{openFile:`src/app/${this.toKebabCase(t)}.component.ts`})}toKebabCase(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase().replace(/-component$/,"")}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Me=["embedContainer"],me=(()=>{class e{constructor(){this.componentName="",this.files={html:"",ts:""},this.title="tanGrid Demo",this.description="tanGrid library demo",this.stackBlitzService=v($),this.vm=null,this.embedTimeout=null}ngAfterViewInit(){this.scheduleEmbed()}ngOnChanges(t){this.embedContainer&&(t.componentName||t.files||t.selector)&&(t.componentName?.firstChange||t.files?.firstChange||this.scheduleEmbed())}ngOnDestroy(){this.embedTimeout&&clearTimeout(this.embedTimeout),this.embedContainer?.nativeElement&&(this.embedContainer.nativeElement.innerHTML=""),this.vm=null}scheduleEmbed(){this.embedTimeout&&clearTimeout(this.embedTimeout),this.embedTimeout=setTimeout(()=>{this.embedProject()},100)}embedProject(){if(!this.embedContainer?.nativeElement)return;let t=this.embedContainer.nativeElement;if(!this.componentName||!this.files||!this.files.ts){t.innerHTML=`
        <div style="padding: 20px; text-align: center; color: #dc3545;">
          <p>Invalid component configuration</p>
        </div>
      `;return}try{let n=this.stackBlitzService.getProjectConfig(this.componentName,this.files,this.title,this.description,this.selector),o=this.toKebabCase(this.componentName);t.innerHTML="",j.embedProject(t,n,{openFile:`src/app/${o}.component.ts`,height:600,theme:"light",view:"preview"}).then(r=>{this.vm=r}).catch(r=>{t.innerHTML=`
          <div style="padding: 20px; text-align: center; color: #dc3545;">
            <p>Failed to load StackBlitz editor.</p>
            <p style="font-size: 0.875rem; color: #6c757d;">${r.message||"Unknown error"}</p>
          </div>
        `})}catch(n){t&&(t.innerHTML=`
          <div style="padding: 20px; text-align: center; color: #dc3545;">
            <p>Failed to create StackBlitz project.</p>
            <p style="font-size: 0.875rem; color: #6c757d;">${n.message||"Unknown error"}</p>
          </div>
        `)}}toKebabCase(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase().replace(/-component$/,"")}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=w({type:e,selectors:[["ngsd-stackblitz-embed"]],viewQuery:function(n,o){if(n&1&&Y(Me,5),n&2){let r;ee(r=te())&&(o.embedContainer=r.first)}},inputs:{componentName:"componentName",files:"files",title:"title",description:"description",selector:"selector"},standalone:!0,features:[Q,E],decls:3,vars:0,consts:[["embedContainer",""],[1,"stackblitz-embed"],[1,"stackblitz-embed__container"]],template:function(n,o){n&1&&(d(0,"div",1),h(1,"div",2,0),m())},dependencies:[T],styles:[".stackblitz-embed[_ngcontent-%COMP%]{width:100%;height:600px;border:1px solid var(--ngs-border-color);border-radius:var(--ngs-border-radius);overflow:hidden;background:var(--ngs-bg-secondary)}.stackblitz-embed__container[_ngcontent-%COMP%]{width:100%;height:100%}"]})}}return e})();function Ie(e,i){e&1&&(h(0,"span",10),d(1,"span"),g(2,"Copied!"),m())}function Ne(e,i){e&1&&(h(0,"span",11),d(1,"span"),g(2,"Copy"),m())}function ze(e,i){if(e&1){let t=Z();d(0,"div",4)(1,"button",7),_("click",function(){N(t);let o=b();return z(o.openStackBlitz())}),h(2,"span",8),d(3,"span"),g(4,"Open New"),m()(),d(5,"button",9),_("click",function(){N(t);let o=b();return z(o.copyCode())}),y(6,Ie,3,0)(7,Ne,3,0),m()()}if(e&2){let t=b();u(5),J("aria-label",t.copied()?"Copied!":"Copy code"),u(),C(t.copied()?6:7)}}function Oe(e,i){if(e&1&&h(0,"ngsd-stackblitz-embed",6),e&2){let t=b();X("componentName",t.componentName)("files",t.parsedFiles())("title",t.title)("selector",t.selector)}}function Fe(e,i){if(e&1&&(d(0,"pre")(1,"code"),g(2),m()()),e&2){let t=b();u(2),ne(t.code)}}var nt=(()=>{class e{constructor(){this.code="",this.componentName="DemoComponent",this.title="Demo",this.stackBlitzService=v($),this.copied=O(!1),this.showEmbed=O(!1),this.parsedFiles=()=>{let t="",n="";if(this.code.includes("// TS")){let o=this.code.split("// TS"),r=o[0].replace("// HTML","").trim();n=o[1].trim(),t=r}else{n=this.code;let o=[/template:\s*\\?`([\s\S]*?)`/m,/template:\s*`([\s\S]*?)`/m],r=null;for(let s of o)if(r=this.code.match(s),r&&r[1])break;if(r&&r[1])t=r[1].replace(/\\`/g,"`").replace(/\\n/g,`
`).replace(/\\t/g,"	").trim(),(!t||t.length===0)&&(t="<!-- Empty template -->");else{let s=this.code.match(/templateUrl:\s*['"]([^'"]+)['"]/);s?t=`<!-- Template file: ${s[1]} -->`:t="<!-- See TS file for implementation -->"}}return{html:t,ts:n}}}get selector(){let n=this.parsedFiles().ts.match(/selector:\s*['"]([^'"]+)['"]/);if(n&&n[1])return n[1]}copyCode(){navigator.clipboard.writeText(this.code).then(()=>{this.copied.set(!0),setTimeout(()=>{this.copied.set(!1)},2e3)})}openStackBlitz(){let t=this.parsedFiles(),n=this.componentName,o=this.selector;if(n==="DemoComponent"){let r=t.ts.match(/export class (\w+)/);r&&r[1]&&(n=r[1])}this.stackBlitzService.openProject(n,t,this.title,"TanGrid library demo",o)}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=w({type:e,selectors:[["ngsd-code-viewer"]],inputs:{code:"code",componentName:"componentName",title:"title"},standalone:!0,features:[E],decls:11,vars:6,consts:[[1,"code-viewer"],[1,"code-viewer__header"],[1,"code-viewer__tabs"],[1,"code-viewer__tab",3,"click"],[1,"code-viewer__actions"],[1,"code-viewer__content"],[3,"componentName","files","title","selector"],["type","button","title","Open in new window",1,"code-viewer__action-btn",3,"click"],[1,"code-viewer__action-icon","mdi","mdi-open-in-new"],["type","button",1,"code-viewer__action-btn",3,"click"],[1,"code-viewer__action-icon","mdi","mdi-check"],[1,"code-viewer__action-icon","mdi","mdi-content-copy"]],template:function(n,o){n&1&&(d(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),_("click",function(){return o.showEmbed.set(!1)}),g(4," Code "),m(),d(5,"button",3),_("click",function(){return o.showEmbed.set(!0)}),g(6," StackBlitz "),m()(),y(7,ze,8,2,"div",4),m(),d(8,"div",5),y(9,Oe,1,4,"ngsd-stackblitz-embed",6)(10,Fe,3,1,"pre"),m()()),n&2&&(u(3),F("code-viewer__tab--active",!o.showEmbed()),u(2),F("code-viewer__tab--active",o.showEmbed()),u(2),C(o.showEmbed()?-1:7),u(2),C(o.showEmbed()?9:10))},dependencies:[T,me],styles:[".code-viewer[_ngcontent-%COMP%]{border:1px solid var(--ngs-border-color);border-radius:var(--ngs-border-radius);overflow:hidden;background:var(--ngs-bg-secondary);margin-top:var(--ngs-spacing-md)}.code-viewer__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:0 var(--ngs-spacing-md);background:var(--ngs-bg-tertiary);border-bottom:1px solid var(--ngs-border-color);height:48px}.code-viewer__tabs[_ngcontent-%COMP%]{display:flex;height:100%}.code-viewer__tab[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 var(--ngs-spacing-lg);background:transparent;border:none;border-bottom:2px solid transparent;color:var(--ngs-text-secondary);font-size:var(--ngs-font-size-sm);font-weight:var(--ngs-font-weight-medium);cursor:pointer;height:100%;transition:var(--ngs-transition-base);&:hover{color:var(--ngs-text-primary);background:#0000000d}&.code-viewer__tab--active{color:var(--ngs-primary);border-bottom-color:var(--ngs-primary);background:var(--ngs-bg-primary)}}.code-viewer__label[_ngcontent-%COMP%]{font-size:var(--ngs-font-size-sm);font-weight:var(--ngs-font-weight-medium);color:var(--ngs-text-secondary);text-transform:uppercase;letter-spacing:.5px}.code-viewer__actions[_ngcontent-%COMP%]{display:flex;gap:var(--ngs-spacing-sm);margin-left:auto}.code-viewer__action-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--ngs-spacing-xs);padding:var(--ngs-spacing-xs) var(--ngs-spacing-sm);background:transparent;border:1px solid var(--ngs-border-color);border-radius:var(--ngs-border-radius-sm);cursor:pointer;font-size:var(--ngs-font-size-xs);color:var(--ngs-text-secondary);transition:var(--ngs-transition-base);&:hover{background:var(--ngs-bg-primary);border-color:var(--ngs-primary);color:var(--ngs-primary)}}.code-viewer__action-icon[_ngcontent-%COMP%]{font-size:var(--ngs-font-size-sm)}.code-viewer__content[_ngcontent-%COMP%]{overflow-x:auto;background:var(--ngs-bg-primary)}.code-viewer__content[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{margin:0;padding:var(--ngs-spacing-md);font-family:Monaco,Menlo,Ubuntu Mono,Consolas,source-code-pro,monospace;font-size:var(--ngs-font-size-sm);line-height:1.6;color:var(--ngs-text-primary);overflow-x:auto}.code-viewer__content[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{font-family:inherit;font-size:inherit}"]})}}return e})();export{nt as a};
