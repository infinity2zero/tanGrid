import{Bb as f,Cb as Y,Jb as x,La as m,W as q,Ya as O,a as u,aa as y,b as _,bb as E,cb as H,db as W,fa as C,fb as z,hb as S,mb as s,na as G,nb as a,oa as M,ob as h,pa as N,sb as Q,ub as v,uc as P,vb as w,xb as J,yb as X,zb as Z}from"./chunk-5NTUSMKZ.js";var de="https://stackblitz.com",ee=["angular-cli","create-react-app","html","javascript","node","polymer","typescript","vue"],pe=["project","search","ports","settings"],me=["light","dark"],ue=["editor","preview"],te={clickToLoad:e=>g("ctl",e),devToolsHeight:e=>ne("devtoolsheight",e),forceEmbedLayout:e=>g("embed",e),hideDevTools:e=>g("hidedevtools",e),hideExplorer:e=>g("hideExplorer",e),hideNavigation:e=>g("hideNavigation",e),openFile:e=>T("file",e),showSidebar:e=>he("showSidebar",e),sidebarView:e=>A("sidebarView",e,pe),startScript:e=>T("startScript",e),terminalHeight:e=>ne("terminalHeight",e),theme:e=>A("theme",e,me),view:e=>A("view",e,ue),zenMode:e=>g("zenMode",e),organization:e=>`${T("orgName",e?.name)}&${T("orgProvider",e?.provider)}`,crossOriginIsolated:e=>g("corp",e)};function oe(e={}){let n=Object.entries(e).map(([t,o])=>o!=null&&te.hasOwnProperty(t)?te[t](o):"").filter(Boolean);return n.length?`?${n.join("&")}`:""}function g(e,n){return n===!0?`${e}=1`:""}function he(e,n){return typeof n=="boolean"?`${e}=${n?"1":"0"}`:""}function ne(e,n){if(typeof n=="number"&&!Number.isNaN(n)){let t=Math.min(100,Math.max(0,n));return`${e}=${encodeURIComponent(Math.round(t))}`}return""}function A(e,n="",t=[]){return t.includes(n)?`${e}=${encodeURIComponent(n)}`:""}function T(e,n){return(Array.isArray(n)?n:[n]).filter(o=>typeof o=="string"&&o.trim()!=="").map(o=>`${e}=${encodeURIComponent(o)}`).join("&")}function ie(){return Math.random().toString(36).slice(2,6)+Math.random().toString(36).slice(2,6)}function V(e,n){return`${re(n)}${e}${oe(n)}`}function L(e,n){let t={forceEmbedLayout:!0};return n&&typeof n=="object"&&Object.assign(t,n),`${re(t)}${e}${oe(t)}`}function re(e={}){return(typeof e.origin=="string"?e.origin:de).replace(/\/$/,"")}function U(e,n,t){if(!n||!e||!e.parentNode)throw new Error("Invalid Element");e.id&&(n.id=e.id),e.className&&(n.className=e.className),fe(n,t),ge(e,n,t),e.replaceWith(n)}function B(e){if(typeof e=="string"){let n=document.getElementById(e);if(!n)throw new Error(`Could not find element with id '${e}'`);return n}else if(e instanceof HTMLElement)return e;throw new Error(`Invalid element: ${e}`)}function R(e){return e&&e.newWindow===!1?"_self":"_blank"}function fe(e,n={}){let t=Object.hasOwnProperty.call(n,"height")?`${n.height}`:"300",o=Object.hasOwnProperty.call(n,"width")?`${n.width}`:void 0;e.setAttribute("height",t),o?e.setAttribute("width",o):e.setAttribute("style","width:100%;")}function ge(e,n,t={}){let o=e.allow?.split(";")?.map(i=>i.trim())??[];t.crossOriginIsolated&&!o.includes("cross-origin-isolated")&&o.push("cross-origin-isolated"),o.length>0&&(n.allow=o.join("; "))}var D=class{constructor(n){this.pending={},this.port=n,this.port.onmessage=this.messageListener.bind(this)}request({type:n,payload:t}){return new Promise((o,i)=>{let r=ie();this.pending[r]={resolve:o,reject:i},this.port.postMessage({type:n,payload:_(u({},t),{__reqid:r})})})}messageListener(n){if(typeof n.data.payload?.__reqid!="string")return;let{type:t,payload:o}=n.data,{__reqid:i,__success:r,__error:c}=o;this.pending[i]&&(r?this.pending[i].resolve(this.cleanResult(o)):this.pending[i].reject(c?`${t}: ${c}`:t),delete this.pending[i])}cleanResult(n){let t=u({},n);return delete t.__reqid,delete t.__success,delete t.__error,Object.keys(t).length?t:null}},F=class{constructor(n,t){this.editor={openFile:o=>this._rdc.request({type:"SDK_OPEN_FILE",payload:{path:o}}),setCurrentFile:o=>this._rdc.request({type:"SDK_SET_CURRENT_FILE",payload:{path:o}}),setTheme:o=>this._rdc.request({type:"SDK_SET_UI_THEME",payload:{theme:o}}),setView:o=>this._rdc.request({type:"SDK_SET_UI_VIEW",payload:{view:o}}),showSidebar:(o=!0)=>this._rdc.request({type:"SDK_TOGGLE_SIDEBAR",payload:{visible:o}})},this.preview={origin:"",getUrl:()=>this._rdc.request({type:"SDK_GET_PREVIEW_URL",payload:{}}).then(o=>o?.url??null),setUrl:(o="/")=>{if(typeof o!="string"||!o.startsWith("/"))throw new Error(`Invalid argument: expected a path starting with '/', got '${o}'`);return this._rdc.request({type:"SDK_SET_PREVIEW_URL",payload:{path:o}})}},this._rdc=new D(n),Object.defineProperty(this.preview,"origin",{value:typeof t.previewOrigin=="string"?t.previewOrigin:null,writable:!1})}applyFsDiff(n){let t=o=>o!==null&&typeof o=="object";if(!t(n)||!t(n.create))throw new Error("Invalid diff object: expected diff.create to be an object.");if(!Array.isArray(n.destroy))throw new Error("Invalid diff object: expected diff.destroy to be an array.");return this._rdc.request({type:"SDK_APPLY_FS_DIFF",payload:n})}getDependencies(){return this._rdc.request({type:"SDK_GET_DEPS_SNAPSHOT",payload:{}})}getFsSnapshot(){return this._rdc.request({type:"SDK_GET_FS_SNAPSHOT",payload:{}})}},j=[],K=class{constructor(n){this.id=ie(),this.element=n,this.pending=new Promise((t,o)=>{let i=({data:l,ports:d})=>{l?.action==="SDK_INIT_SUCCESS"&&l.id===this.id&&(this.vm=new F(d[0],l.payload),t(this.vm),c())},r=()=>{this.element.contentWindow?.postMessage({action:"SDK_INIT",id:this.id},"*")};function c(){window.clearInterval(b),window.removeEventListener("message",i)}window.addEventListener("message",i),r();let p=0,b=window.setInterval(()=>{if(this.vm){c();return}if(p>=20){c(),o("Timeout: Unable to establish a connection with the StackBlitz VM"),j.forEach((l,d)=>{l.id===this.id&&j.splice(d,1)});return}p++,r()},500)}),j.push(this)}},be=e=>{let n=e instanceof Element?"element":"id";return j.find(t=>t[n]===e)??null};function _e(e,n){let t=document.createElement("input");return t.type="hidden",t.name=e,t.value=n,t}function we(e){return e.replace(/\[/g,"%5B").replace(/\]/g,"%5D")}function se({template:e,title:n,description:t,dependencies:o,files:i,settings:r}){if(!ee.includes(e)){let l=ee.map(d=>`'${d}'`).join(", ");console.warn(`Unsupported project.template: must be one of ${l}`)}let c=[],p=(l,d,le="")=>{c.push(_e(l,typeof d=="string"?d:le))};p("project[title]",n),typeof t=="string"&&t.length>0&&p("project[description]",t),p("project[template]",e,"javascript"),o&&(e==="node"?console.warn("Invalid project.dependencies: dependencies must be provided as a 'package.json' file when using the 'node' template."):p("project[dependencies]",JSON.stringify(o))),r&&p("project[settings]",JSON.stringify(r)),Object.entries(i).forEach(([l,d])=>{p(`project[files][${we(l)}]`,d)});let b=document.createElement("form");return b.method="POST",b.setAttribute("style","display:none!important;"),b.append(...c),b}function ve(e,n){let t=se(e);return t.action=L("/run",n),t.id="sb_run",`<!doctype html>
<html>
<head><title></title></head>
<body>
  ${t.outerHTML}
  <script>document.getElementById('${t.id}').submit();<\/script>
</body>
</html>`}function ye(e,n){let t=se(e);t.action=V("/run",n),t.target=R(n),document.body.appendChild(t),t.submit(),document.body.removeChild(t)}function $(e){return e?.contentWindow?(be(e)??new K(e)).pending:Promise.reject("Provided element is not an iframe.")}function Ce(e,n){ye(e,n)}function Ee(e,n){let t=V(`/edit/${e}`,n),o=R(n);window.open(t,o)}function Se(e,n){let t=V(`/github/${e}`,n),o=R(n);window.open(t,o)}function xe(e,n,t){let o=B(e),i=ve(n,t),r=document.createElement("iframe");return U(o,r,t),r.contentDocument?.write(i),$(r)}function Pe(e,n,t){let o=B(e),i=document.createElement("iframe");return i.src=L(`/edit/${n}`,t),U(o,i,t),$(i)}function Te(e,n,t){let o=B(e),i=document.createElement("iframe");return i.src=L(`/github/${n}`,t),U(o,i,t),$(i)}var k={connect:$,embedGithubProject:Te,embedProject:xe,embedProjectId:Pe,openGithubProject:Se,openProject:Ce,openProjectId:Ee};var I=(()=>{class e{openProject(t,o,i="TanGrid Demo",r="TanGrid library demo"){let c={title:i,description:r,template:"angular-cli",files:_(u({"src/index.html":`
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>TanGrid Demo</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
  <app-root></app-root>
</body>
</html>`,"src/main.ts":`
import { bootstrapApplication } from '@angular/platform-browser';
import { Component } from '@angular/core';
import { ${t} } from './app/${this.toKebabCase(t)}.component';

@Component({
  selector: 'app-root',
  standalone: true,
  imports: [${t}],
  template: \`
    <div style="padding: 20px;">
      <h1>${i}</h1>
      <${this.toKebabCase(t)}></${this.toKebabCase(t)}>
    </div>
  \`
})
export class App {}

bootstrapApplication(App);
`,[`src/app/${this.toKebabCase(t)}.component.ts`]:o.ts,[`src/app/${this.toKebabCase(t)}.component.html`]:o.html},o.css?{[`src/app/${this.toKebabCase(t)}.component.css`]:o.css}:{}),{"src/styles.css":`
:root {
  --ngs-primary: #3b82f6;
  --ngs-primary-fg: #ffffff;
  --ngs-bg-primary: #ffffff;
  --ngs-text-primary: #1f2937;
  --ngs-border-color: #e5e7eb;
}
body { font-family: system-ui, -apple-system, sans-serif; }
`}),dependencies:{"@angular/core":"^18.0.0","@angular/common":"^18.0.0","@angular/platform-browser":"^18.0.0","@angular/compiler":"^18.0.0","@angular/forms":"^18.0.0","@angular/router":"^18.0.0",rxjs:"^7.8.0",tslib:"^2.3.0","zone.js":"~0.14.0",tangrid:"latest","@tanstack/angular-table":"^8.0.0"}};k.openProject(c,{openFile:`src/app/${this.toKebabCase(t)}.component.ts`})}toKebabCase(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase().replace(/-component$/,"")}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var je=["embedContainer"],ce=(()=>{class e{constructor(){this.componentName="",this.files={html:"",ts:""},this.title="tanGrid Demo",this.description="tanGrid library demo",this.stackBlitzService=y(I),this.vm=null}ngAfterViewInit(){this.embedProject()}ngOnChanges(t){(t.componentName||t.files)&&!t.componentName.isFirstChange()&&this.embedProject()}ngOnDestroy(){this.vm=null}embedProject(){if(!this.embedContainer)return;let t=this.createProjectConfig();k.embedProject(this.embedContainer.nativeElement,t,{openFile:`src/app/${this.toKebabCase(this.componentName)}.component.ts`,height:600,theme:"light",view:"preview"}).then(o=>{this.vm=o})}createProjectConfig(){return{title:this.title,description:this.description,template:"angular-cli",files:_(u({"src/index.html":`
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>tanGrid Demo</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
  <app-root></app-root>
</body>
</html>`,"src/main.ts":`
import { bootstrapApplication } from '@angular/platform-browser';
import { Component } from '@angular/core';
import { ${this.componentName} } from './app/${this.toKebabCase(this.componentName)}.component';

@Component({
  selector: 'app-root',
  standalone: true,
  imports: [${this.componentName}],
  template: \`
    <div style="padding: 20px;">
      <h1>${this.title}</h1>
      <${this.toKebabCase(this.componentName)}></${this.toKebabCase(this.componentName)}>
    </div>
  \`
})
export class App {}

bootstrapApplication(App);
`,[`src/app/${this.toKebabCase(this.componentName)}.component.ts`]:this.files.ts,[`src/app/${this.toKebabCase(this.componentName)}.component.html`]:this.files.html},this.files.css?{[`src/app/${this.toKebabCase(this.componentName)}.component.css`]:this.files.css}:{}),{"src/styles.css":`
:root {
  --ngs-primary: #3b82f6;
  --ngs-primary-fg: #ffffff;
  --ngs-bg-primary: #ffffff;
  --ngs-text-primary: #1f2937;
  --ngs-border-color: #e5e7eb;
}
body { font-family: system-ui, -apple-system, sans-serif; }
`}),dependencies:{"@angular/core":"^18.0.0","@angular/common":"^18.0.0","@angular/platform-browser":"^18.0.0","@angular/compiler":"^18.0.0","@angular/forms":"^18.0.0","@angular/router":"^18.0.0",rxjs:"^7.8.0",tslib:"^2.3.0","zone.js":"~0.14.0",tangrid:"latest","@tanstack/angular-table":"^8.0.0"}}}toKebabCase(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase().replace(/-component$/,"")}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=C({type:e,selectors:[["ngsd-stackblitz-embed"]],viewQuery:function(o,i){if(o&1&&J(je,5),o&2){let r;X(r=Z())&&(i.embedContainer=r.first)}},inputs:{componentName:"componentName",files:"files",title:"title",description:"description"},standalone:!0,features:[G,x],decls:3,vars:0,consts:[["embedContainer",""],[1,"stackblitz-embed"],[1,"stackblitz-embed__container"]],template:function(o,i){o&1&&(s(0,"div",1),h(1,"div",2,0),a())},dependencies:[P],styles:[".stackblitz-embed[_ngcontent-%COMP%]{width:100%;height:600px;border:1px solid var(--ngs-border-color);border-radius:var(--ngs-border-radius);overflow:hidden;background:var(--ngs-bg-secondary)}.stackblitz-embed__container[_ngcontent-%COMP%]{width:100%;height:100%}"]})}}return e})();function $e(e,n){e&1&&(h(0,"span",10),s(1,"span"),f(2,"Copied!"),a())}function ke(e,n){e&1&&(h(0,"span",11),s(1,"span"),f(2,"Copy"),a())}function Ie(e,n){if(e&1){let t=Q();s(0,"div",4)(1,"button",7),v("click",function(){M(t);let i=w();return N(i.openStackBlitz())}),h(2,"span",8),s(3,"span"),f(4,"Open New"),a()(),s(5,"button",9),v("click",function(){M(t);let i=w();return N(i.copyCode())}),E(6,$e,3,0)(7,ke,3,0),a()()}if(e&2){let t=w();m(5),H("aria-label",t.copied()?"Copied!":"Copy code"),m(),S(t.copied()?6:7)}}function Me(e,n){if(e&1&&h(0,"ngsd-stackblitz-embed",6),e&2){let t=w();W("componentName",t.componentName)("files",t.parsedFiles())("title",t.title)}}function Ne(e,n){if(e&1&&(s(0,"pre")(1,"code"),f(2),a()()),e&2){let t=w();m(2),Y(t.code)}}var et=(()=>{class e{constructor(){this.code="",this.componentName="DemoComponent",this.title="Demo",this.stackBlitzService=y(I),this.copied=O(!1),this.showEmbed=O(!1),this.parsedFiles=()=>{let t="",o="";if(this.code.includes("// TS")){let i=this.code.split("// TS"),r=i[0].replace("// HTML","").trim();o=i[1].trim(),t=r}else o=this.code,t="<!-- See TS file for implementation -->";return{html:t,ts:o}}}copyCode(){navigator.clipboard.writeText(this.code).then(()=>{this.copied.set(!0),setTimeout(()=>{this.copied.set(!1)},2e3)})}openStackBlitz(){let t=this.parsedFiles();this.stackBlitzService.openProject(this.componentName,t,this.title)}static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=C({type:e,selectors:[["ngsd-code-viewer"]],inputs:{code:"code",componentName:"componentName",title:"title"},standalone:!0,features:[x],decls:11,vars:6,consts:[[1,"code-viewer"],[1,"code-viewer__header"],[1,"code-viewer__tabs"],[1,"code-viewer__tab",3,"click"],[1,"code-viewer__actions"],[1,"code-viewer__content"],[3,"componentName","files","title"],["type","button","title","Open in new window",1,"code-viewer__action-btn",3,"click"],[1,"code-viewer__action-icon","mdi","mdi-open-in-new"],["type","button",1,"code-viewer__action-btn",3,"click"],[1,"code-viewer__action-icon","mdi","mdi-check"],[1,"code-viewer__action-icon","mdi","mdi-content-copy"]],template:function(o,i){o&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),v("click",function(){return i.showEmbed.set(!1)}),f(4," Code "),a(),s(5,"button",3),v("click",function(){return i.showEmbed.set(!0)}),f(6," StackBlitz "),a()(),E(7,Ie,8,2,"div",4),a(),s(8,"div",5),E(9,Me,1,3,"ngsd-stackblitz-embed",6)(10,Ne,3,1,"pre"),a()()),o&2&&(m(3),z("code-viewer__tab--active",!i.showEmbed()),m(2),z("code-viewer__tab--active",i.showEmbed()),m(2),S(i.showEmbed()?-1:7),m(2),S(i.showEmbed()?9:10))},dependencies:[P,ce],styles:[".code-viewer[_ngcontent-%COMP%]{border:1px solid var(--ngs-border-color);border-radius:var(--ngs-border-radius);overflow:hidden;background:var(--ngs-bg-secondary);margin-top:var(--ngs-spacing-md)}.code-viewer__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:0 var(--ngs-spacing-md);background:var(--ngs-bg-tertiary);border-bottom:1px solid var(--ngs-border-color);height:48px}.code-viewer__tabs[_ngcontent-%COMP%]{display:flex;height:100%}.code-viewer__tab[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 var(--ngs-spacing-lg);background:transparent;border:none;border-bottom:2px solid transparent;color:var(--ngs-text-secondary);font-size:var(--ngs-font-size-sm);font-weight:var(--ngs-font-weight-medium);cursor:pointer;height:100%;transition:var(--ngs-transition-base);&:hover{color:var(--ngs-text-primary);background:#0000000d}&.code-viewer__tab--active{color:var(--ngs-primary);border-bottom-color:var(--ngs-primary);background:var(--ngs-bg-primary)}}.code-viewer__label[_ngcontent-%COMP%]{font-size:var(--ngs-font-size-sm);font-weight:var(--ngs-font-weight-medium);color:var(--ngs-text-secondary);text-transform:uppercase;letter-spacing:.5px}.code-viewer__actions[_ngcontent-%COMP%]{display:flex;gap:var(--ngs-spacing-sm);margin-left:auto}.code-viewer__action-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--ngs-spacing-xs);padding:var(--ngs-spacing-xs) var(--ngs-spacing-sm);background:transparent;border:1px solid var(--ngs-border-color);border-radius:var(--ngs-border-radius-sm);cursor:pointer;font-size:var(--ngs-font-size-xs);color:var(--ngs-text-secondary);transition:var(--ngs-transition-base);&:hover{background:var(--ngs-bg-primary);border-color:var(--ngs-primary);color:var(--ngs-primary)}}.code-viewer__action-icon[_ngcontent-%COMP%]{font-size:var(--ngs-font-size-sm)}.code-viewer__content[_ngcontent-%COMP%]{overflow-x:auto;background:var(--ngs-bg-primary)}.code-viewer__content[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{margin:0;padding:var(--ngs-spacing-md);font-family:Monaco,Menlo,Ubuntu Mono,Consolas,source-code-pro,monospace;font-size:var(--ngs-font-size-sm);line-height:1.6;color:var(--ngs-text-primary);overflow-x:auto}.code-viewer__content[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{font-family:inherit;font-size:inherit}"]})}}return e})();export{et as a};
